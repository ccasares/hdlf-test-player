================================================================
üîí REPRODUCTOR DE VIDEO ULTRA-SEGURO
================================================================

¬°Bienvenido! Has creado un sistema de reproducci√≥n de video donde
la URL NUNCA se expone en el navegador.

================================================================
¬øQU√â TIENES AQU√ç?
================================================================

Un servidor completo con DOS sistemas de protecci√≥n:

1. üÜï REPRODUCTOR ULTRA-SEGURO (RECOMENDADO)
   ‚Üí La URL del video NUNCA aparece en el frontend
   ‚Üí Usa API proxy con tokens de sesi√≥n temporal
   ‚Üí M√°xima seguridad y protecci√≥n

2. üì∫ SISTEMA CL√ÅSICO (Legacy)
   ‚Üí URLs firmadas con HMAC-SHA256
   ‚Üí Tokens temporales con expiraci√≥n
   ‚Üí Validaci√≥n de referer

================================================================
¬øC√ìMO FUNCIONA EL SISTEMA NUEVO?
================================================================

1. Usuario visita: /access.php
2. Sistema genera token de sesi√≥n temporal
3. Usuario accede a: /player.html?token=abc123...
4. Reproductor solicita video a: /api/stream.php?token=abc123...
5. API valida token y hace proxy del video desde quasars.ddns.net
6. Video se reproduce SIN exponer la URL real

¬°El navegador NUNCA ve la URL de quasars.ddns.net:8880!

================================================================
INICIO R√ÅPIDO - 3 OPCIONES
================================================================

OPCI√ìN A: PRUEBA LOCAL (M√°s r√°pido)
------------------------------------
1. Lee: TEST_LOCAL.md
2. php -S localhost:8000
3. Visita: http://localhost:8000/access.php

OPCI√ìN B: DESPLEGAR A HEROKU (Recomendado)
------------------------------------------
1. Lee: HEROKU_SETUP.txt
2. heroku create mi-app
3. heroku config:set SECRET_KEY=$(openssl rand -hex 32)
4. git push heroku main
5. heroku open

OPCI√ìN C: SYNOLOGY NAS
---------------------
1. Sube archivos a /volume1/web/
2. Crea archivo .env (ver CONFIGURACION_ENV.txt)
3. Configura Web Station con PHP 7.4+
4. Visita: https://tu-nas.com/access.php

================================================================
ARCHIVOS IMPORTANTES
================================================================

üìÑ LEEME_PRIMERO.txt        ‚Üê Est√°s aqu√≠
üìÑ TEST_LOCAL.md            ‚Üê Probar en local
üìÑ HEROKU_SETUP.txt         ‚Üê Desplegar a Heroku (paso a paso)
üìÑ REPRODUCTOR_SEGURO.md    ‚Üê Documentaci√≥n completa del sistema nuevo
üìÑ README.md                ‚Üê Documentaci√≥n t√©cnica completa
üìÑ DEPLOY.md                ‚Üê Gu√≠a detallada de despliegue
üìÑ INICIO_RAPIDO.md         ‚Üê Gu√≠a r√°pida 5 minutos

================================================================
ESTRUCTURA DEL PROYECTO
================================================================

/
‚îú‚îÄ‚îÄ access.php              üîë P√°gina de acceso (EMPIEZA AQU√ç)
‚îú‚îÄ‚îÄ player.html             üé¨ Reproductor ultra-seguro
‚îÇ
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ session.php         üé´ Gesti√≥n de tokens temporales
‚îÇ   ‚îî‚îÄ‚îÄ stream.php          üì° API proxy para video
‚îÇ
‚îú‚îÄ‚îÄ sessions/               üíæ Tokens temporales (auto-gestionado)
‚îÇ
‚îú‚îÄ‚îÄ video.php               üì∫ Sistema legacy de videos
‚îú‚îÄ‚îÄ generate_url.php        üîó Generador de URLs firmadas (legacy)
‚îú‚îÄ‚îÄ demo.html               üé™ Demo del sistema legacy
‚îú‚îÄ‚îÄ index.php               üè† P√°gina principal
‚îÇ
‚îî‚îÄ‚îÄ videos/                 üé• Tus archivos de video

================================================================
¬øQU√â SISTEMA USAR?
================================================================

USA EL NUEVO (Recomendado): /access.php
----------------------------------------
‚úÖ URL nunca se expone
‚úÖ M√°xima seguridad
‚úÖ Tokens de sesi√≥n temporal
‚úÖ Interfaz moderna
‚úÖ F√°cil de usar

USA EL LEGACY: /demo.html
-------------------------
‚úÖ URLs firmadas HMAC
‚úÖ Compatible con URLs p√∫blicas
‚ö†Ô∏è  La URL est√° en el frontend (aunque firmada)

================================================================
CONFIGURACI√ìN M√çNIMA REQUERIDA
================================================================

Crea un archivo .env con:

SECRET_KEY=clave-secreta-aqui
ALLOWED_DOMAIN=https://tudominio.com
BASE_URL=https://tudominio.com

Genera clave secreta:
openssl rand -hex 32

================================================================
PROBAR R√ÅPIDAMENTE
================================================================

1. Crear .env:
   cp CONFIGURACION_ENV.txt .env
   (Edita .env con tu configuraci√≥n)

2. Iniciar servidor:
   php -S localhost:8000

3. Abrir navegador:
   http://localhost:8000/access.php

4. Hacer clic en "Acceso Directo"

5. ¬°Disfruta del video!

================================================================
URL DEL VIDEO CONFIGURADA
================================================================

Actualmente apunta a:
http://quasars.ddns.net:8880/videos/webtest.mp4

Para cambiarla, edita: api/stream.php
L√≠nea 45: $VIDEO_URL = 'tu-nueva-url-aqui';

O agrega m√°s videos en el array $videoUrls (l√≠nea 200)

================================================================
DESPLIEGUE A PRODUCCI√ìN
================================================================

HEROKU (Recomendado para principiantes):
----------------------------------------
heroku create mi-reproductor
heroku config:set SECRET_KEY=$(openssl rand -hex 32)
heroku config:set ALLOWED_DOMAIN=https://mi-reproductor.herokuapp.com
heroku config:set BASE_URL=https://mi-reproductor.herokuapp.com
git push heroku main
heroku open

Ver gu√≠a completa: HEROKU_SETUP.txt

SYNOLOGY NAS:
-------------
1. Subir archivos v√≠a File Station
2. Configurar .env
3. Habilitar PHP en Web Station
4. Configurar Virtual Host

Ver gu√≠a completa: README.md (secci√≥n Synology)

================================================================
SEGURIDAD
================================================================

El sistema nuevo es ULTRA SEGURO porque:

1. ‚úÖ URL real NUNCA en el frontend
2. ‚úÖ Tokens temporales con expiraci√≥n (1 hora)
3. ‚úÖ Validaci√≥n en cada request
4. ‚úÖ Sesi√≥n vinculada a IP (opcional)
5. ‚úÖ API proxy intermediaria
6. ‚úÖ No se puede copiar la URL del video
7. ‚úÖ Inspector del navegador no ve nada

A√∫n as√≠, recuerda:
- El video se transmite al navegador (como Netflix, YouTube, etc.)
- Con herramientas avanzadas se puede capturar el stream
- Pero requiere token v√°lido que expira

================================================================
PERSONALIZACI√ìN
================================================================

CAMBIAR DURACI√ìN DE SESI√ìN:
----------------------------
Edita api/session.php, l√≠nea 47:
$SESSION_DURATION = 3600; // 1 hora

AGREGAR C√ìDIGO DE ACCESO:
--------------------------
En .env:
ACCESS_CODE=mi-codigo-secreto

O en Heroku:
heroku config:set ACCESS_CODE=mi-codigo-secreto

AGREGAR M√ÅS VIDEOS:
-------------------
Edita api/stream.php, l√≠neas 200-205:
$videoUrls = [
    'webtest' => 'http://...',
    'video2' => 'http://...',
    'video3' => 'http://...'
];

CAMBIAR DISE√ëO:
---------------
Los archivos HTML tienen CSS inline, f√°cil de modificar:
- access.php (l√≠nea 10-200)
- player.html (l√≠nea 10-220)

================================================================
SOLUCI√ìN R√ÅPIDA DE PROBLEMAS
================================================================

‚ùå "Token required"
   ‚Üí Vuelve a /access.php y genera nuevo token

‚ùå "Invalid or expired token"
   ‚Üí Token expir√≥ (>1 hora), genera uno nuevo

‚ùå "Remote video not available"
   ‚Üí Servidor quasars.ddns.net:8880 no responde
   ‚Üí Verifica que est√© online

‚ùå Video no carga
   ‚Üí Abre DevTools (F12) > Console
   ‚Üí Lee el error espec√≠fico
   ‚Üí Verifica token con: /api/session.php?action=validate&token=TU_TOKEN

‚ùå "Application Error" en Heroku
   ‚Üí heroku logs --tail
   ‚Üí Lee el error y corr√≠gelo

================================================================
TESTING
================================================================

Probar API de sesi√≥n:
curl -X POST http://localhost:8000/api/session.php?action=create \
  -H "Content-Type: application/json" \
  -d '{"video_id": "webtest"}'

Probar validaci√≥n:
curl http://localhost:8000/api/session.php?action=validate&token=TOKEN_AQUI

Ver sesiones activas:
ls -lh sessions/

Ver logs en Heroku:
heroku logs --tail

================================================================
RECURSOS Y DOCUMENTACI√ìN
================================================================

üìö Documentaci√≥n Completa:
   - README.md              (Todo sobre el proyecto)
   - REPRODUCTOR_SEGURO.md  (Sistema nuevo en detalle)
   - DEPLOY.md              (Despliegue completo)

üöÄ Gu√≠as de Inicio:
   - TEST_LOCAL.md          (Probar localmente)
   - HEROKU_SETUP.txt       (Desplegar a Heroku)
   - INICIO_RAPIDO.md       (Gu√≠a 5 minutos)

‚öôÔ∏è Configuraci√≥n:
   - CONFIGURACION_ENV.txt  (C√≥mo crear .env)
   - .env.example           (Plantilla de .env)

================================================================
SOPORTE
================================================================

¬øProblemas? Revisa estos archivos en orden:

1. TEST_LOCAL.md (si es en local)
2. HEROKU_SETUP.txt (si es en Heroku)
3. REPRODUCTOR_SEGURO.md (troubleshooting completo)
4. README.md (FAQ y soluciones)

================================================================
PR√ìXIMOS PASOS
================================================================

1. ‚úÖ Leer TEST_LOCAL.md
2. ‚úÖ Probar en local (php -S localhost:8000)
3. ‚úÖ Verificar que todo funciona
4. ‚úÖ Configurar variables para producci√≥n
5. ‚úÖ Desplegar a Heroku (HEROKU_SETUP.txt)
6. ‚úÖ Compartir el link /access.php con usuarios

================================================================
¬°LISTO PARA USAR!
================================================================

Comando m√°s r√°pido para empezar:

1. php -S localhost:8000
2. Visita: http://localhost:8000/access.php
3. Haz clic en "Acceso Directo"
4. ¬°Disfruta!

================================================================
RECORDATORIO
================================================================

La URL del video (http://quasars.ddns.net:8880/videos/webtest.mp4)
est√° configurada en: api/stream.php l√≠nea 45

Si quieres cambiarla, edita ese archivo.

================================================================

¬°Que disfrutes tu sistema de videos ultra-seguro! üîíüé¨

================================================================

