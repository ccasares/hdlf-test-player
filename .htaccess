# Configuración Apache para el servidor de videos protegidos

# Habilitar reescritura de URLs
RewriteEngine On

# Prevenir acceso directo al directorio videos/
RewriteRule ^videos/.*$ - [F,L]

# Redirigir index.html a index.php
DirectoryIndex index.php index.html

# Habilitar CORS si es necesario (descomentar si usas dominios diferentes)
# Header set Access-Control-Allow-Origin "*"
# Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
# Header set Access-Control-Allow-Headers "Content-Type"

# Proteger archivos sensibles
<FilesMatch "\.(env|md|json|lock)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Prevenir listado de directorios
Options -Indexes

# Configurar tipos MIME para videos
<IfModule mod_mime.c>
    AddType video/mp4 .mp4
    AddType video/webm .webm
    AddType video/ogg .ogv
    AddType video/quicktime .mov
    AddType video/x-msvideo .avi
</IfModule>

# Habilitar compresión
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
</IfModule>

# Cache control para videos
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType video/mp4 "access plus 1 hour"
    ExpiresByType video/webm "access plus 1 hour"
</IfModule>

